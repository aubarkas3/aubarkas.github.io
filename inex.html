<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nosebleeds Club ‚Äî Last‚ÄëMinute Ticket Alerts</title>
    <meta name="description" content="Get texts when great last‚Äëminute tickets drop near you. Free to join. Zero spam. Cancel anytime." />
    <meta property="og:title" content="Nosebleeds Club ‚Äî Last‚ÄëMinute Ticket Alerts" />
    <meta property="og:description" content="Get texts when great last‚Äëminute tickets drop near you. Free to join. Zero spam. Cancel anytime." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/og-nosebleeds.png" />
    <meta name="theme-color" content="#1f40ff" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              nbBlue: '#1f40ff',
              nbCoral: '#ff6b6b',
              nbInk: '#0b1020',
              nbSlate: '#11162a',
            },
            boxShadow: {
              glow: '0 10px 30px rgba(31,64,255,0.35)',
            },
          },
        },
      };
    </script>

    <style>
      /* tiny polish */
      .blur-accent {
        position: absolute; inset: -20%;
        background: radial-gradient(35% 35% at 20% 20%, rgba(31,64,255,.35), transparent 60%),
                    radial-gradient(30% 30% at 80% 0%, rgba(255,107,107,.25), transparent 60%),
                    radial-gradient(25% 25% at 60% 75%, rgba(31,64,255,.25), transparent 60%);
        filter: blur(40px); pointer-events: none; z-index: 0;
      }
      .tick:before { content: '‚úì'; margin-right: .5rem }
      .ring-focus:focus { outline: none; box-shadow: 0 0 0 6px rgba(31,64,255,.25) }
    </style>

    <!-- Favicon (optional) -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%231f40ff'/%3E%3Cg fill='white'%3E%3Ccircle cx='24' cy='32' r='9'/%3E%3Ccircle cx='40' cy='32' r='9'/%3E%3Crect x='23' y='24' width='18' height='5' rx='2'/%3E%3C/g%3E%3C/svg%3E" />
  </head>

  <body class="bg-nbInk text-white antialiased">
    <div class="relative overflow-hidden">
      <div class="blur-accent"></div>

      <!-- Header -->
      <header class="relative z-10">
        <div class="mx-auto max-w-7xl px-6 py-5 flex items-center justify-between">
          <a href="#top" class="flex items-center gap-2 group">
            <div class="h-9 w-9 rounded-xl bg-gradient-to-br from-nbBlue to-nbCoral grid place-items-center shadow-glow">
              <span class="text-white text-lg">üî≠</span>
            </div>
            <span class="font-black tracking-tight text-lg md:text-xl group-hover:opacity-90">NOSEBLEEDS</span>
          </a>
          <nav class="hidden md:flex items-center gap-8 text-sm text-white/80">
            <a href="#how" class="hover:text-white">How it works</a>
            <a href="#faq" class="hover:text-white">FAQ</a>
            <a href="#signup" class="px-3 py-2 rounded-xl bg-nbBlue hover:brightness-110 shadow-glow">Get alerts</a>
          </nav>
        </div>
      </header>

      <!-- Hero -->
      <section id="top" class="relative z-10">
        <div class="mx-auto max-w-7xl px-6 pt-6 pb-10 md:pt-12 md:pb-16">
          <div class="grid md:grid-cols-2 items-center gap-10">
            <div>
              <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80 mb-4">
                <span>New</span>
                <span class="h-1 w-1 rounded-full bg-nbCoral inline-block"></span>
                <span>Last‚Äëminute ticket text alerts</span>
              </div>
              <h1 class="text-4xl md:text-6xl font-black tracking-tight leading-[1.05]">
                Be the friend who <span class="bg-gradient-to-r from-nbBlue to-nbCoral bg-clip-text text-transparent">finds the deal</span>.
              </h1>
              <p class="mt-5 text-white/80 md:text-lg max-w-prose">
                We text you when prices drop for shows near you‚Äîconcerts, games, comedy, all of it. Free to join. Zero spam. Cancel anytime.
              </p>

              <!-- Inline signup (short) -->
              <form id="heroForm" class="mt-7 flex flex-col sm:flex-row gap-3" onsubmit="return handleSubmit(event)">
                <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="Your mobile number" class="flex-1 rounded-xl bg-white/10 px-4 py-3 ring-focus placeholder:text-white/50" required />
                <input id="zip" name="zip" type="text" inputmode="numeric" pattern="\\d{5}" maxlength="5" placeholder="ZIP" class="w-28 rounded-xl bg-white/10 px-4 py-3 ring-focus placeholder:text-white/50" required />
                <button id="submitBtn" class="rounded-xl bg-nbBlue px-5 py-3 font-semibold hover:brightness-110 shadow-glow">Text me alerts</button>
              </form>
              <p class="mt-2 text-xs text-white/60">By joining, you agree to receive recurring automated promotional and personalized marketing text messages (e.g., cart reminders) from Nosebleeds at the cell number used when signing up. Consent is not a condition of any purchase. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel.</p>

              <!-- Trust badges -->
              <div class="mt-6 flex items-center gap-4 text-white/70 text-sm">
                <div class="tick">Only when prices drop</div>
                <div class="tick">Local to your ZIP</div>
                <div class="tick">1‚Äëclick opt‚Äëout</div>
              </div>
            </div>

            <!-- Card -->
            <div class="relative">
              <div class="absolute -inset-6 rounded-3xl bg-gradient-to-tr from-nbBlue/30 to-nbCoral/30 blur-2xl"></div>
              <div class="relative rounded-3xl border border-white/10 bg-white/5 p-6 md:p-8">
                <div class="text-sm text-white/70">Sample alert</div>
                <div class="mt-3 rounded-2xl bg-nbSlate p-4">
                  <div class="text-xs text-white/60">Tonight ‚Ä¢ TD Garden</div>
                  <div class="mt-1 font-semibold">Dua Lipa ‚Äî 200s prices just dipped to $74 on StubHub</div>
                  <ul class="mt-2 space-y-1 text-sm text-white/80">
                    <li>‚Ä¢ Ticketmaster: $92</li>
                    <li>‚Ä¢ SeatGeek: $88</li>
                    <li>‚Ä¢ Gametime: $79</li>
                    <li>‚Ä¢ StubHub: <span class="font-bold text-nbCoral">$74</span></li>
                  </ul>
                  <button class="mt-4 w-full rounded-xl bg-white/10 py-2 text-sm hover:bg-white/15">Open price map</button>
                </div>
                <div class="mt-4 text-xs text-white/60">We compare across marketplaces and ping you when a section you care about hits a good price.</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Social proof & logos -->
      <section class="relative z-10 border-y border-white/10 bg-white/5">
        <div class="mx-auto max-w-7xl px-6 py-10 md:py-12 text-center">
          <p class="text-white/70 text-sm">Built by fans for fans. Works with the biggest marketplaces.</p>
          <div class="mt-5 grid grid-cols-2 md:grid-cols-4 gap-6 opacity-80">
            <div class="rounded-xl bg-white/5 py-3">Ticketmaster</div>
            <div class="rounded-xl bg-white/5 py-3">SeatGeek</div>
            <div class="rounded-xl bg-white/5 py-3">StubHub</div>
            <div class="rounded-xl bg-white/5 py-3">Gametime</div>
          </div>
        </div>
      </section>

      <!-- How it works -->
      <section id="how" class="relative z-10">
        <div class="mx-auto max-w-7xl px-6 py-14">
          <h2 class="text-2xl md:text-3xl font-black">How it works</h2>
          <div class="mt-6 grid md:grid-cols-3 gap-6">
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <div class="text-3xl">üìç</div>
              <h3 class="mt-3 font-bold">Tell us your ZIP</h3>
              <p class="mt-1 text-white/80 text-sm">So we only text you about shows near you.</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <div class="text-3xl">üéüÔ∏è</div>
              <h3 class="mt-3 font-bold">We watch prices</h3>
              <p class="mt-1 text-white/80 text-sm">Across marketplaces and sections you care about.</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <div class="text-3xl">üì≤</div>
              <h3 class="mt-3 font-bold">We text you drops</h3>
              <p class="mt-1 text-white/80 text-sm">Short, useful, and only when it helps you buy.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Big signup -->
      <section id="signup" class="relative z-10">
        <div class="mx-auto max-w-3xl px-6 pb-16">
          <div class="rounded-3xl border border-white/10 bg-white/5 p-6 md:p-8">
            <h2 class="text-2xl md:text-3xl font-black">Join the SMS waitlist</h2>
            <p class="mt-1 text-white/80">Be first when alerts go live in your city. It‚Äôs free.</p>

            <form id="fullForm" class="mt-6 grid md:grid-cols-2 gap-4" onsubmit="return handleSubmit(event)">
              <div class="md:col-span-2 grid md:grid-cols-3 gap-4">
                <input id="full_phone" name="phone" type="tel" inputmode="tel" placeholder="Mobile number" class="rounded-xl bg-white/10 px-4 py-3 ring-focus placeholder:text-white/50" required />
                <input id="full_zip" name="zip" type="text" inputmode="numeric" pattern="\\d{5}" maxlength="5" placeholder="ZIP" class="rounded-xl bg-white/10 px-4 py-3 ring-focus placeholder:text-white/50" required />
                <select id="genres" class="rounded-xl bg-white/10 px-4 py-3 ring-focus text-white/90">
                  <option value="" class="bg-nbInk">Favorite genre (optional)</option>
                  <option class="bg-nbInk">Pop</option>
                  <option class="bg-nbInk">Hip‚ÄëHop</option>
                  <option class="bg-nbInk">Country</option>
                  <option class="bg-nbInk">Rock</option>
                  <option class="bg-nbInk">EDM</option>
                  <option class="bg-nbInk">Comedy</option>
                  <option class="bg-nbInk">Sports</option>
                </select>
              </div>
              <input id="artists" placeholder="Favorite artists/teams (optional)" class="md:col-span-2 rounded-xl bg-white/10 px-4 py-3 ring-focus placeholder:text-white/50" />

              <label class="md:col-span-2 flex items-start gap-3 text-sm text-white/80">
                <input id="consent" type="checkbox" class="mt-1" required />
                <span>I consent to receive recurring automated marketing text messages from Nosebleeds at the phone number provided. Consent is not a condition of purchase. Msg & data rates may apply. Reply STOP to cancel and HELP for help. Privacy Policy & Terms below.</span>
              </label>

              <button id="fullSubmitBtn" class="md:col-span-2 mt-2 w-full rounded-xl bg-nbBlue px-5 py-3 font-semibold hover:brightness-110 shadow-glow">Join the waitlist</button>

              <p id="formMessage" class="md:col-span-2 mt-2 text-sm"></p>
            </form>
          </div>
        </div>
      </section>

      <!-- FAQ -->
      <section id="faq" class="relative z-10">
        <div class="mx-auto max-w-5xl px-6 pb-14">
          <h2 class="text-2xl md:text-3xl font-black">FAQ</h2>
          <div class="mt-6 grid md:grid-cols-2 gap-4">
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <h3 class="font-semibold">What cities do you support?</h3>
              <p class="text-white/80 mt-1 text-sm">We‚Äôre rolling out by demand. Add your ZIP to move your city up the list.</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <h3 class="font-semibold">How many texts will I get?</h3>
              <p class="text-white/80 mt-1 text-sm">Usually 1‚Äì3 per week, only when there‚Äôs a meaningful price dip.</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <h3 class="font-semibold">Is this free?</h3>
              <p class="text-white/80 mt-1 text-sm">Yes. Normal carrier rates may apply.</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <h3 class="font-semibold">Can I opt out?</h3>
              <p class="text-white/80 mt-1 text-sm">Reply STOP anytime. We‚Äôll miss you.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="relative z-10 border-t border-white/10">
        <div class="mx-auto max-w-7xl px-6 py-8 text-sm text-white/70 flex flex-col md:flex-row items-center justify-between gap-3">
          <div>¬© <span id="year"></span> Nosebleeds Club. All rights reserved.</div>
          <div class="flex items-center gap-5">
            <a href="#" class="hover:text-white">Privacy</a>
            <a href="#" class="hover:text-white">Terms</a>
            <a href="https://nosebleeds.club" class="hover:text-white">nosebleeds.club</a>
          </div>
        </div>
      </footer>
    </div>

    <!-- Firebase (compat CDN for simplicity) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
      // ---- Replace with your analytics ID if you want to add gtag separately ----
      // window.dataLayer = window.dataLayer || [];
      // function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
      // gtag('config', 'G-XXXXXXX');

      // ---- Firebase client config (safe to expose in browser) ----
      const firebaseConfig = {
        apiKey: "AIzaSyBz6eqGQp4bphKxwJKP7_KlSt9sf-5v4F4",
        authDomain: "nosebleeds-app.firebaseapp.com",
        projectId: "nosebleeds-app",
        storageBucket: "nosebleeds-app.firebasestorage.app",
        messagingSenderId: "1063797826615",
        appId: "1:1063797826615:web:38730eb5a017ac9c668bb2",
        measurementId: "G-4WX9RQN3LL",
      };

      firebase.initializeApp(firebaseConfig);
      let analytics; try { analytics = firebase.analytics(); } catch (e) {}
      const db = firebase.firestore();

      // Utilities
      const qs = (sel) => document.querySelector(sel);
      const byId = (id) => document.getElementById(id);

      // Capture UTM params for attribution
      const urlParams = new URLSearchParams(window.location.search);
      const utm = {
        source: urlParams.get('utm_source') || '',
        medium: urlParams.get('utm_medium') || '',
        campaign: urlParams.get('utm_campaign') || '',
        content: urlParams.get('utm_content') || '',
        term: urlParams.get('utm_term') || '',
        fbclid: urlParams.get('fbclid') || '',
      };

      // Basic phone cleanup (US-focused) ‚Äî keep digits only
      function normalizePhone(v) { return (v || '').replace(/\D/g,''); }

      async function saveSignup(payload) {
        // Create collection if it doesn't exist; Firestore will handle it automatically
        const ref = await db.collection('sms_waitlist').add(payload);
        return ref.id;
      }

      async function handleSubmit(e) {
        e.preventDefault();

        const form = e.target.id === 'heroForm' ? 'hero' : 'full';
        const phone = normalizePhone(byId(form === 'hero' ? 'phone' : 'full_phone').value);
        const zip = byId(form === 'hero' ? 'zip' : 'full_zip').value.trim();
        const genres = byId('genres') ? byId('genres').value : '';
        const artists = byId('artists') ? byId('artists').value.trim() : '';
        const consent = byId('consent') ? byId('consent').checked : true; // hero form has legal text above

        if (!/^[2-9]\d{9}$/.test(phone)) {
          toast('Enter a valid 10‚Äëdigit US mobile number');
          return false;
        }
        if (!/^\d{5}$/.test(zip)) {
          toast('Enter a valid 5‚Äëdigit ZIP');
          return false;
        }
        if (!consent) {
          toast('Please agree to SMS consent to join');
          return false;
        }

        toggleLoading(true, form);
        try {
          const docId = await saveSignup({
            phone,
            zip,
            genres: genres || null,
            artists: artists || null,
            consent: true,
            source: form,
            utm,
            userAgent: navigator.userAgent,
            createdAt: new Date().toISOString(),
          });

          if (analytics) {
            try { analytics.logEvent('join_sms_waitlist', { source: form }); } catch (e) {}
          }

          showSuccess(form);
        } catch (err) {
          console.error(err);
          toast('Something went wrong. Please try again.');
        } finally {
          toggleLoading(false, form);
        }
        return false;
      }

      function toggleLoading(isLoading, form) {
        const btn = byId(form === 'hero' ? 'submitBtn' : 'fullSubmitBtn');
        if (!btn) return;
        btn.disabled = isLoading;
        btn.textContent = isLoading ? 'Joining‚Ä¶' : (form === 'hero' ? 'Text me alerts' : 'Join the waitlist');
        btn.classList.toggle('opacity-70', isLoading);
      }

      function showSuccess(form) {
        if (form === 'hero') {
          byId('phone').value = '';
          byId('zip').value = '';
          toast('You\'re on the list! Check your SMS soon.');
          // Scroll to full form success area for clear feedback
          document.getElementById('signup').scrollIntoView({ behavior: 'smooth' });
        } else {
          const msg = byId('formMessage');
          msg.textContent = 'You\'re on the list! We\'ll text you when drops go live in your area.';
          msg.className = 'md:col-span-2 mt-2 text-sm text-green-300';
          byId('full_phone').value = '';
          byId('full_zip').value = '';
          if (byId('genres')) byId('genres').value = '';
          if (byId('artists')) byId('artists').value = '';
          if (byId('consent')) byId('consent').checked = false;
        }
      }

      function toast(text) {
        let n = document.createElement('div');
        n.textContent = text;
        n.className = 'fixed left-1/2 -translate-x-1/2 top-5 z-[999] rounded-xl bg-white/90 text-nbInk px-4 py-2 shadow-lg';
        document.body.appendChild(n);
        setTimeout(() => n.remove(), 2600);
      }

      // Footer year
      document.getElementById('year').textContent = new Date().getFullYear();
    </script>

    <!-- (Optional) Simple schema for better SEO -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Nosebleeds Club",
        "url": "https://nosebleeds.club",
        "description": "SMS alerts for last‚Äëminute ticket price drops near you.",
        "publisher": { "@type": "Organization", "name": "Nosebleeds" }
      }
    </script>
  </body>
</html>
